# Prisoners and Lamp

There are 100 prisoners in a prison. The wardens allow themselves a little game with them.

The prison has a separate room with a lamp. The wardens select `a random prisoner each day` and lead them into that room. There the prisoner may switch the lamp on or off. Then they will be led back into their cell.

If any one of the prisoners proclaims `All of us 100 have been to the lamp room at least once!` and they are correct, the prisoners get free. If the claim was incorrect, they get no more cookies for the remainder of their arrest.

As the punishment is very harsh, the prisoners want to be absolutely sure. They don't care about probabilities. (Otherwise the strategy would simply be "Wait for 20 years, then we're most likely done")

Which strategy do the prisoners have to employ such that at some point in the future one of them will know for sure that each of the prisoners has already entered the lamp room?

Summary:
- The prisoners are allowed to meet and agree on a strategy before the game starts. This strategy is what I'm asking for as a solution.
- The prisoners will never meet again and will have no means of communication (except for the lamp).
- The prisoners will also not be able to see the state of the lamp, except when they are selected and led into the room by the wardens.
- The prisoners don't need to end the game immediately as soon as the last one has entered the lamp room. It's OK if e.g. the last prisoner visits the room after 3 years and one of the prisoners ends the game after 10 years.
